<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mi Sitio Web{% endblock %}</title>

    <!-- Meta Tags for SEO -->
    <meta name="description" content="{% block meta_description %}DescripciÃ³n por defecto del sitio{% endblock %}">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>

    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s) {
            if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)
        }(window, document,'script', 'https://connect.facebook.net/en_US/fbevents.js');

        fbq('init', 'PIXEL_ID');
        fbq('track', 'PageView');

        {% if request.session.webinar_registration_complete %}
        // Track conversion if registration was completed
        fbq('track', 'Lead');
        {% endif %}
    </script>

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav>
            {% if not request.resolver_match.url_name == 'webinar_landing' %}
            <a href="{% url 'landings:webinar_landing' %}">Webinar</a>
            {% endif %}
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}
        <!-- Page specific content goes here -->
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; {% now "Y" %} Mi Sitio Web. Todos los derechos reservados.</p>
    </footer>

    {% block extra_js %}{% endblock %}
</body>
</html>
